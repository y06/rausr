{{- $pages := where .Site.RegularPages "Section" "in" (slice "blog" "works") -}}
[
{{- $comma := "" -}}
{{- range $pages -}}
  {{- $title := .Title | jsonify -}}
  {{- $desc  := (or .Description .Summary) | plainify | truncate 220 | jsonify -}}
  {{- $img   := (or .Params.header_image .Params.preview_image .Site.Params.defaultImage) | jsonify -}}
  {{- $tags  := .Params.tags | default (slice) | jsonify -}}
  {{- printf "%s{\"title\":%s,\"url\":%q,\"section\":%q,\"date\":%q,\"description\":%s,\"tags\":%s,\"image\":%s}" $comma $title .RelPermalink .Section (.Date.Format "2006-01-02") $desc $tags $img -}}
  {{- $comma = ",\n" -}}
{{- end -}}
]